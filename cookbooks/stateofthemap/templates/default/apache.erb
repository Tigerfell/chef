# DO NOT EDIT - This file is being maintained by Chef

<VirtualHost *:80>
        ServerName stateofthemap.org
        ServerAlias stateofthemap.com
        ServerAlias sotm.org
        ServerAlias www.stateofthemap.org
        ServerAlias www.stateofthemap.com
        ServerAlias www.sotm.org
        ServerAdmin webmaster@openstreetmap.org

        CustomLog /var/log/apache2/stateofthemap.org-access.log combined
        ErrorLog /var/log/apache2/stateofthemap.org-error.log

        RedirectPermanent /.well-known/acme-challenge/ http://acme.openstreetmap.org/.well-known/acme-challenge/
        RedirectPermanent / https://stateofthemap.org/
</VirtualHost>

<VirtualHost *:443>
        ServerName stateofthemap.com
        ServerAlias sotm.org
        ServerAlias www.stateofthemap.org
        ServerAlias www.stateofthemap.com
        ServerAlias www.sotm.org
        ServerAdmin webmaster@openstreetmap.org

        CustomLog /var/log/apache2/stateofthemap.org-access.log combined
        ErrorLog /var/log/apache2/stateofthemap.org-error.log

        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/stateofthemap.org.pem
        SSLCertificateKeyFile /etc/ssl/private/stateofthemap.org.key

        RedirectPermanent / https://stateofthemap.org/
</VirtualHost>

<VirtualHost *:443>
        ServerName stateofthemap.org
        ServerAdmin webmaster@openstreetmap.org

        CustomLog /var/log/apache2/stateofthemap.org-access.log combined
        ErrorLog /var/log/apache2/stateofthemap.org-error.log

        SSLEngine on
        SSLCertificateFile /etc/ssl/certs/stateofthemap.org.pem
        SSLCertificateKeyFile /etc/ssl/private/stateofthemap.org.key

        DocumentRoot /srv/stateofthemap.org/html

        ErrorDocument 404 /404.html

        ExpiresActive On
        ExpiresDefault "access plus 12 hours"
</VirtualHost>

<Directory /srv/stateofthemap.org/html>
        Require all granted
</Directory>
